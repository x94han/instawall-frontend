import{Q as f,a as o}from"./QCardSection.b4764d2d.js";import{Q as b,n as p}from"./notifyApiError.22ce61ab.js";import{q as w,a$ as S,b0 as B,F,D as N,r as v,H as g,I as h,N as r,L as s,M as j,J as e,K as a,aC as x,a6 as A,b1 as I,aY as L,Q as u,O as P,a7 as z}from"./index.ef0b161e.js";import{Q as E}from"./QForm.29410c8f.js";import{Q as M}from"./QSeparator.f2252361.js";function $(){return w(S)}const D={class:"bg-grey-1 fullscreen q-pa-md scroll flex justify-center items-center"},H={style:{width:"350px","max-width":"350px"}},K=r("h3",{class:"text-grand-hotel q-my-lg"},"Instawall",-1),O=r("div",{class:"absolute-center q-px-md bg-white text-grey text-bold"}," \u6216 ",-1),T=r("div",{class:"self-center"},"\u6C92\u6709\u5E33\u865F\u55CE\uFF1F",-1),U=r("h3",{class:"text-grand-hotel q-my-lg"},"Instawall",-1),J=["src"],R={class:"self-center"},ae={__name:"LoginPage",setup(Y){const y=$(),q=B(),n=F(),k=w("defaultAvatar"),i=N({email:"",password:""}),c=v(!1),Q=async m=>{c.value=!0;try{await n.login(i),q.push({name:"HomePage"})}catch(l){p(l)}finally{c.value=!1}},d=v(!1),C=async m=>{d.value=!0;try{y.notify({color:"brown",position:"top",message:"\u529F\u80FD\u5F85\u958B\u653E"})}catch(l){p(l)}finally{d.value=!1}},V=async m=>{try{y.notify({color:"brown",position:"top",message:"\u529F\u80FD\u5F85\u958B\u653E"})}catch(l){p(l)}finally{}};return(m,l)=>(g(),h("div",D,[r("div",H,[s(n).validToken?x("",!0):(g(),h(j,{key:0},[e(f,{flat:"",bordered:"",class:"text-center q-mb-md"},{default:a(()=>[e(o,null,{default:a(()=>[K]),_:1}),e(o,{class:"q-pt-none"},{default:a(()=>[e(E,{onSubmit:Q,class:"column q-gutter-sm"},{default:a(()=>[e(b,{modelValue:i.email,"onUpdate:modelValue":l[0]||(l[0]=t=>i.email=t),modelModifiers:{trim:!0},type:"email",square:"",outlined:"",dense:"","lazy-rules":"",rules:[t=>s(I)(t)||"\u8ACB\u8F38\u5165\u6B63\u78BA\u683C\u5F0F"],placeholder:"\u96FB\u5B50\u90F5\u4EF6\u5730\u5740"},null,8,["modelValue","rules"]),e(b,{modelValue:i.password,"onUpdate:modelValue":l[1]||(l[1]=t=>i.password=t),modelModifiers:{trim:!0},type:"password",square:"",outlined:"",dense:"","lazy-rules":"",rules:[t=>s(L)(t)||"\u5BC6\u78BC\u9577\u5EA6\u9700\u5927\u65BC\u516B\u78BC\u4E14\u6578\u5B57\u8207\u82F1\u6587\u6216\u7B26\u865F\u6DF7\u5408"],placeholder:"\u5BC6\u78BC"},null,8,["modelValue","rules"]),e(u,{label:"\u767B\u5165",type:"submit",color:"primary",loading:c.value},null,8,["loading"])]),_:1})]),_:1}),e(o,{class:"relative-position q-px-md"},{default:a(()=>[e(M),O]),_:1}),e(o,null,{default:a(()=>[e(u,{onClick:C,flat:"",color:"indigo-10",icon:"eva-facebook-outline",label:"\u4F7F\u7528 Facebook \u5E33\u865F\u767B\u5165",class:"text-bold",loading:d.value},null,8,["loading"])]),_:1}),e(o,{class:"q-pt-none"},{default:a(()=>[r("span",{onClick:V,class:"text-caption text-indigo cursor-pointer"},"\u5FD8\u8A18\u5BC6\u78BC\uFF1F ")]),_:1})]),_:1}),e(f,{flat:"",bordered:"",class:"text-center"},{default:a(()=>[e(o,{class:"row justify-center"},{default:a(()=>[T,e(u,{flat:"",color:"primary",label:"\u8A3B\u518A",to:"/signup"})]),_:1})]),_:1})],64)),s(n).validToken&&!c.value?(g(),A(f,{key:1,flat:"",bordered:"",class:"text-center"},{default:a(()=>[e(o,null,{default:a(()=>[U,e(P,{size:"100px"},{default:a(()=>{var t;return[r("img",{src:((t=s(n).user)==null?void 0:t.avatar)||s(k)},null,8,J)]}),_:1})]),_:1}),e(o,null,{default:a(()=>{var t;return[e(u,{label:`\u4F7F\u7528 ${(t=s(n).user)==null?void 0:t.screenName} \u7684\u8EAB\u5206\u7E7C\u7E8C`,type:"submit",color:"primary",to:"/"},null,8,["label"]),e(o,{class:"row justify-center"},{default:a(()=>{var _;return[r("div",R," \u4E0D\u662F "+z((_=s(n).user)==null?void 0:_.screenName)+"\uFF1F ",1),e(u,{flat:"",color:"primary",label:"\u5207\u63DB\u5E33\u865F",onClick:s(n).logout},null,8,["onClick"])]}),_:1})]}),_:1})]),_:1})):x("",!0)])]))}};export{ae as default};
